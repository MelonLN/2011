<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch√∫c M·ª´ng 20/11 - M·∫π Hu·ªá</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Patrick+Hand&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #ff7eb3;
            --text-color: #fff;
        }
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000;
            font-family: 'Patrick Hand', cursive;
        }

        /* --- M√ÄN H√åNH 1: INTRO --- */
        #intro-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 3;
            transition: opacity 1s ease;
            cursor: pointer;
        }
        .bouquet {
            font-size: 100px;
            animation: float 3s ease-in-out infinite;
        }
        .intro-text {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            color: #d63384;
            margin-top: 20px;
            text-align: center;
        }
        .tap-hint {
            margin-top: 50px;
            color: #888;
            animation: blink 1.5s infinite;
        }

        /* --- M√ÄN H√åNH 2: SLIDESHOW & TEXT --- */
        #story-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #1a1a1a;
            z-index: 2;
            opacity: 0;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        /* ·∫¢nh n·ªÅn ch·∫°y tr√¥i */
        #bg-slider {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0.3;
            filter: blur(4px);
            transition: background-image 1s ease-in-out;
        }
        
        .message-container {
            position: relative;
            z-index: 4;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: white;
        }
        
        .text-line {
            font-size: 1.5rem;
            line-height: 1.6;
            margin-bottom: 5px;
            opacity: 0; /* ·∫®n m·∫∑c ƒë·ªãnh */
            transform: translateY(20px);
            transition: all 1s ease;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }

        .signature {
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            color: #ff7eb3;
            margin-top: 30px;
            font-weight: bold;
        }

        /* --- M√ÄN H√åNH 3: 3D GALLERY --- */
        #gallery-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background: #000;
        }
        
        #canvas-container {
            width: 100%;
            height: 100%;
        }

        .hint-3d {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            pointer-events: none;
            z-index: 10;
            opacity: 0.7;
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .visible {
            opacity: 1 !important;
            transform: translateY(0) !important;
        }

    </style>
</head>
<body>

    <!-- SCENE 1: INTRO -->
    <div id="intro-screen">
        <div class="bouquet">üíê</div>
        <h1 class="intro-text">Ch√∫c m·ª´ng ng√†y nh√† gi√°o Vi·ªát Nam</h1>
        <div class="tap-hint">(Ch·∫°m v√†o m√†n h√¨nh ƒë·ªÉ b·∫Øt ƒë·∫ßu)</div>
    </div>

    <!-- SCENE 2: STORY & MESSAGE -->
    <div id="story-screen">
        <div id="bg-slider"></div>
        <div class="message-container">
            <p class="text-line">D√π m·ªói ng√†y t·ª•i con ƒë·ªÅu tr√¢n tr·ªçng nh·ªØng g√¨ m·∫π Hu·ªá d√†nh cho t·ª•i con...</p>
            <p class="text-line">Nh∆∞ng 20‚Äì11 l√† d·ªãp ƒë·∫∑c bi·ªát ƒë·ªÉ g·ª≠i l·ªùi c·∫£m ∆°n tr·ªçn v·∫πn...</p>
            <p class="text-line">M·ªôt k·ª∑ ni·ªám kh√¥ng th·ªÉ thi·∫øu trong thanh xu√¢n c·∫•p 3 c·ªßa t·ª•i con.</p>
            <p class="text-line">C·∫£m ∆°n m·∫π v√¨ s·ª± t·∫≠n t√¢m, ki√™n nh·∫´n, y√™u th∆∞∆°ng v√† lu√¥n ƒë·ªìng h√†nh c√πng t·ª•i con.</p>
            <p class="text-line">Nh·ªØng g√¨ m·∫π l√†m, d√π nh·ªè, lu√¥n ƒë∆∞·ª£c t·ª•i con ghi nh·ªõ.</p>
            <p class="text-line">K√≠nh ch√∫c m·∫π Hu·ªá m·∫°nh kh·ªèe, b√¨nh an, h·∫°nh ph√∫c...</p>
            <p class="text-line">V√† gia ƒë√¨nh lu√¥n ·∫•m √°p, tr√†n ƒë·∫ßy ti·∫øng c∆∞·ªùi.</p>
            <div class="text-line signature">
                THPT Tr·∫ßn Ph√∫ ‚Äì 20/11/2025<br>
                L·ªõp A1 ‚Äì K43
            </div>
        </div>
    </div>

    <!-- SCENE 3: 3D GALLERY -->
    <div id="gallery-screen">
        <div id="canvas-container"></div>
        <div class="hint-3d">K√©o th·∫£ ƒë·ªÉ xem c√°c kho·∫£nh kh·∫Øc</div>
    </div>

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- OrbitControls th·ªß c√¥ng ho·∫∑c CDN -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // --- C·∫§U H√åNH D·ªÆ LI·ªÜU ---
        
        // 1. Danh s√°ch ·∫£nh gi√°o vi√™n (D√πng cho c·∫£ n·ªÅn ch·∫°y v√† 3D)
        // Thay c√°c link n√†y b·∫±ng link ·∫£nh th·∫≠t c·ªßa C√¥/M·∫π Hu·ªá
        const teacherImages = [
            "./z7135639962596_a723e332b2bc614873d381fca27f3d9b.jpg", // ·∫¢nh 1
            "./z7135639913716_35575a1344b4d2cedf0061ddfc14285c.avif", // ·∫¢nh 2
            "./z7135639937577_d5a8d141b94cae7f03f79b6ec8d655b5.jpg", // ·∫¢nh 3
            "./z7135777360971_8eeb164d9c0c9e2873f77bf855416717.jpg", // ·∫¢nh 4
            "./z7206508634961_e3c012f03d7c24c338fb8d5a407c3135.jpg"  // ·∫¢nh 5
        ];

        // --- LOGIC CHUY·ªÇN C·∫¢NH ---
        const introScreen = document.getElementById('intro-screen');
        const storyScreen = document.getElementById('story-screen');
        const bgSlider = document.getElementById('bg-slider');
        const textLines = document.querySelectorAll('.text-line');
        let currentImgIdx = 0;

        // B·∫Øt s·ª± ki·ªán click ƒë·ªÉ b·∫Øt ƒë·∫ßu
        introScreen.addEventListener('click', () => {
            introScreen.style.opacity = '0';
            setTimeout(() => {
                introScreen.style.display = 'none';
                startStory();
            }, 1000);
        });

        function startStory() {
            storyScreen.style.opacity = '1';
            
            // B·∫Øt ƒë·∫ßu ƒë·ªïi ·∫£nh n·ªÅn
            changeBackground();
            setInterval(changeBackground, 3000);

            // Hi·ªán ch·ªØ d·∫ßn d·∫ßn
            let delay = 500;
            textLines.forEach((line, index) => {
                setTimeout(() => {
                    line.classList.add('visible');
                }, delay);
                delay += 2500; // Th·ªùi gian ƒë·ªçc m·ªói d√≤ng
            });

            // Sau khi ch·ªØ ch·∫°y xong h·∫øt th√¨ chuy·ªÉn sang 3D (kho·∫£ng th·ªùi gian t·ªïng + 5s)
            const totalTime = delay + 5000;
            setTimeout(() => {
                transitionTo3D();
            }, totalTime);
        }

        function changeBackground() {
            bgSlider.style.backgroundImage = `url('${teacherImages[currentImgIdx]}')`;
            currentImgIdx = (currentImgIdx + 1) % teacherImages.length;
        }

        function transitionTo3D() {
            // Fade out story screen
            storyScreen.style.opacity = '0';
            setTimeout(() => {
                storyScreen.style.display = 'none';
                initThreeJS(); // B·∫Øt ƒë·∫ßu scene 3D
            }, 2000);
        }

        // --- THREE.JS LOGIC (KH√îNG GIAN 3D) ---
function initThreeJS() {
    const container = document.getElementById('canvas-container');

    /* ---------------------------------------------------
     * 1. SCENE ‚Äì CAMERA ‚Äì RENDERER
     * --------------------------------------------------- */
    const scene = new THREE.Scene();
    scene.fog = new THREE.FogExp2(0x000000, 0.002);

    const camera = new THREE.PerspectiveCamera(
        60,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
    );
    camera.position.set(0, 0, 500);

    const renderer = new THREE.WebGLRenderer({
        alpha: true,
        antialias: true
    });
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);

    /* ---------------------------------------------------
     * 2. ORBIT CONTROLS
     * --------------------------------------------------- */
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
    controls.autoRotate = true;
    controls.autoRotateSpeed = 1.0;

    /* ---------------------------------------------------
     * 3. LOAD & ADD IMAGES TO 3D SPACE
     * --------------------------------------------------- */
    const loader = new THREE.TextureLoader();

    // Nh√¢n b·∫£n danh s√°ch cho nhi·ªÅu ·∫£nh h∆°n
    const galleryImages = [...teacherImages, ...teacherImages, ...teacherImages];

    galleryImages.forEach(url => {
        loader.load(
            url,
            (texture) => {
                // L·∫•y k√≠ch th∆∞·ªõc ·∫£nh g·ªëc
                const img = texture.image;
                const w = img.width;
                const h = img.height;

                // Scale ƒë·ªÉ ·∫£nh kh√¥ng qu√° to
                const scale = 0.12;   // B·∫°n c√≥ th·ªÉ ch·ªânh s·ªë n√†y

                // Geometry theo ƒë√∫ng t·ª∑ l·ªá g·ªëc
                const geometry = new THREE.PlaneGeometry(w * scale, h * scale);

                const material = new THREE.MeshBasicMaterial({
                    map: texture,
                    side: THREE.DoubleSide
                });

                const mesh = new THREE.Mesh(geometry, material);

                // T·∫°o v·ªã tr√≠ ng·∫´u nhi√™n theo d·∫°ng h√¨nh c·∫ßu
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos((Math.random() * 2) - 1);
                const radius = 200 + Math.random() * 150;

                mesh.position.x = radius * Math.sin(phi) * Math.cos(theta);
                mesh.position.y = radius * Math.sin(phi) * Math.sin(theta);
                mesh.position.z = radius * Math.cos(phi);

                // Cho ·∫£nh nh√¨n v·ªÅ t√¢m
                mesh.lookAt(0, 0, 0);

                scene.add(mesh);
            },

            undefined, // onProgress (kh√¥ng c·∫ßn)
            (err) => {
                console.warn("Kh√¥ng load ƒë∆∞·ª£c ·∫£nh:", url);
            }
        );
    });

    /* ---------------------------------------------------
     * 4. T·∫†O HI·ªÜU ·ª®NG SAO
     * --------------------------------------------------- */
    const starGeo = new THREE.BufferGeometry();
    const starCount = 1000;
    const starPos = new Float32Array(starCount * 3);

    for (let i = 0; i < starCount * 3; i++) {
        starPos[i] = (Math.random() - 0.5) * 1000;
    }

    starGeo.setAttribute("position", new THREE.BufferAttribute(starPos, 3));

    const starMat = new THREE.PointsMaterial({
        color: 0xffffff,
        size: 2
    });

    const stars = new THREE.Points(starGeo, starMat);
    scene.add(stars);

    /* ---------------------------------------------------
     * 5. ANIMATION LOOP
     * --------------------------------------------------- */
    function animate() {
        requestAnimationFrame(animate);
        controls.update();
        renderer.render(scene, camera);
    }

    animate();

    /* ---------------------------------------------------
     * 6. RESPONSIVE RESIZE
     * --------------------------------------------------- */
    window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
}


    </script>
</body>
</html>
