<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ch√∫c M·ª´ng 20/11 - M·∫π Hu·ªá</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Patrick+Hand&display=swap" rel="stylesheet">
<style>
:root {
    --primary-color: #ff7eb3;
    --text-color: #fff;
}

body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background-color: #000;
    font-family: 'Patrick Hand', cursive;
}

/* --- INTRO SCREEN --- */
#intro-screen {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 3;
    cursor: pointer;
    transition: opacity 1s ease;
}
.bouquet {
    font-size: 100px;
    animation: float 3s ease-in-out infinite;
}
.intro-text {
    font-family: 'Dancing Script', cursive;
    font-size: 2.5rem;
    color: #d63384;
    margin-top: 20px;
    text-align: center;
}
.tap-hint {
    margin-top: 50px;
    color: #888;
    animation: blink 1.5s infinite;
}

/* --- STORY SCREEN --- */
#story-screen {
    position: absolute;
    top:0; left:0;
    width: 100%; height: 100%;
    z-index: 2;
    opacity: 0;
    pointer-events: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

/* 2 layer background */
.bg-slider-layer {
    position: absolute;
    top:0; left:0;
    width: 100%; height: 100%;
    background-size: cover;
    background-position: center;
    opacity: 0;
    filter: blur(4px);
    transition: opacity 2s ease-in-out;
}
.bg-slider-layer.active {
    opacity: 0.3;
}

.message-container {
    position: relative;
    z-index: 4;
    width: 80%;
    max-width: 700px;
    text-align: center;
    color: white;
}
.text-line {
    font-size: 1.2rem;
    line-height: 1.4;
    margin-bottom: 5px;
    opacity: 0;
    transform: translateY(20px) scale(0.9);
    filter: blur(4px);
    transition: all 0.5s ease;
    text-shadow: 0 2px 4px rgba(0,0,0,0.8);
}
.text-line.visible {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
}
.signature {
    font-family: 'Dancing Script', cursive;
    font-size: 2rem;
    color: var(--primary-color);
    margin-top: 30px;
    font-weight: bold;
}

/* --- 3D GALLERY --- */
#gallery-screen {
    position: absolute;
    top:0; left:0;
    width:100%; height:100%;
    z-index:1;
    background: #000;
}
#canvas-container { width:100%; height:100%; }
.hint-3d {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    color: white;
    pointer-events: none;
    z-index: 10;
    opacity: 0.7;
}

/* --- ANIMATIONS --- */
@keyframes float {
    0%,100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
}
@keyframes blink {
    0%,100% { opacity:1; }
    50% { opacity:0.5; }
}
</style>
</head>
<body>

<!-- Intro -->
<div id="intro-screen">
    <div class="bouquet">üíê</div>
    <h1 class="intro-text">Ch√∫c m·ª´ng ng√†y nh√† gi√°o Vi·ªát Nam</h1>
    <div class="tap-hint">(Ch·∫°m v√†o m√†n h√¨nh ƒë·ªÉ b·∫Øt ƒë·∫ßu)</div>
</div>

<!-- Story -->
<div id="story-screen">
    <div id="bg-slider1" class="bg-slider-layer active"></div>
    <div id="bg-slider2" class="bg-slider-layer"></div>
    <div class="message-container">
        <p class="text-line">D√π m·ªói ng√†y t·ª•i con ƒë·ªÅu tr√¢n tr·ªçng nh·ªØng g√¨ m·∫π Hu·ªá d√†nh cho t·ª•i con...</p>
        <p class="text-line">Nh∆∞ng 20‚Äì11 l√† d·ªãp ƒë·∫∑c bi·ªát ƒë·ªÉ g·ª≠i l·ªùi c·∫£m ∆°n tr·ªçn v·∫πn...</p>
        <p class="text-line">M·ªôt k·ª∑ ni·ªám kh√¥ng th·ªÉ thi·∫øu trong thanh xu√¢n c·∫•p 3 c·ªßa t·ª•i con.</p>
        <p class="text-line">C·∫£m ∆°n m·∫π v√¨ s·ª± t·∫≠n t√¢m, ki√™n nh·∫´n, y√™u th∆∞∆°ng v√† lu√¥n ƒë·ªìng h√†nh c√πng t·ª•i con.</p>
        <p class="text-line">Nh·ªØng g√¨ m·∫π l√†m, d√π nh·ªè, lu√¥n ƒë∆∞·ª£c t·ª•i con ghi nh·ªõ.</p>
        <p class="text-line">K√≠nh ch√∫c m·∫π Hu·ªá m·∫°nh kh·ªèe, b√¨nh an, h·∫°nh ph√∫c...</p>
        <p class="text-line">V√† gia ƒë√¨nh lu√¥n ·∫•m √°p, tr√†n ƒë·∫ßy ti·∫øng c∆∞·ªùi.</p>
        <div class="text-line signature">
            THPT Tr·∫ßn Ph√∫ ‚Äì 20/11/2025<br>
            L·ªõp A1 ‚Äì K43
        </div>
    </div>
</div>

<!-- 3D Gallery -->
<div id="gallery-screen">
    <div id="canvas-container"></div>
    <div class="hint-3d">K√©o th·∫£ ƒë·ªÉ xem c√°c kho·∫£nh kh·∫Øc</div>
</div>

<audio id="bg-music" src="./sd.mp3" loop></audio>

<!-- Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

<script>
// --- D·ªØ li·ªáu ·∫£nh ---
const teacherImages = [
    "./z7135639962596_a723e332b2bc614873d381fca27f3d9b.jpg",
    "./z7135639913716_35575a1344b4d2cedf0061ddfc14285c.avif",
    "./z7135639937577_d5a8d141b94cae7f03f79b6ec8d655b5.jpg",
    "./z7135777360971_8eeb164d9c0c9e2873f77bf855416717.jpg",
    "./z7206508634961_e3c012f03d7c24c338fb8d5a407c3135.jpg",
    "./z7221388307337_9ada818c98fddfa6bf91263657146ef6.jpg"
];

// --- DOM elements ---
const introScreen = document.getElementById('intro-screen');
const storyScreen = document.getElementById('story-screen');
const textLines = document.querySelectorAll('.text-line');
const bg1 = document.getElementById('bg-slider1');
const bg2 = document.getElementById('bg-slider2');
const music = document.getElementById('bg-music');

let currentImgIdx = 0;
let toggle = true;

// --- Intro click: b·∫≠t nh·∫°c v√† b·∫Øt ƒë·∫ßu story ---
introScreen.addEventListener('click', () => {
    // Fade out intro
    introScreen.style.opacity = '0';

    // B·∫≠t nh·∫°c n·ªÅn
    music.volume = 0.3;
    music.play();

    // ·∫®n intro v√† b·∫Øt ƒë·∫ßu story
    setTimeout(() => {
        introScreen.style.display = 'none';
        startStory();
    }, 1000);
});

// --- Story logic ---
function startStory() {
    storyScreen.style.opacity = '1';

    // B·∫Øt ƒë·∫ßu background slideshow
    changeBackground();
    const bgInterval = setInterval(changeBackground, 4000);

    // Hi·ªáu ·ª©ng g√µ ch·ªØ t·ª´ng k√Ω t·ª±
    let delay = 500;
    textLines.forEach(line => {
        setTimeout(() => typeLine(line), delay);
        delay += line.textContent.length * 100 + 500; // 100ms/ k√Ω t·ª± + 500ms pause
    });

    // Chuy·ªÉn 3D sau khi ch·ªØ xong
    const totalTime = delay + 1000;
    setTimeout(() => {
        clearInterval(bgInterval);
        transitionTo3D();
    }, totalTime);
}

// --- Typing effect ---
function typeLine(line) {
    const text = line.textContent;
    if (!text) return; // an to√†n
    line.textContent = '';
    line.classList.add('visible');
    let i = 0;
    const interval = setInterval(() => {
        line.textContent += text[i];
        i++;
        if (i >= text.length) clearInterval(interval);
    }, 100);
}

// --- Background slideshow ---
function changeBackground() {
    const nextImg = teacherImages[currentImgIdx];
    currentImgIdx = (currentImgIdx + 1) % teacherImages.length;

    if(toggle) {
        bg2.style.backgroundImage = `url('${nextImg}')`;
        bg2.classList.add('active');
        bg1.classList.remove('active');
    } else {
        bg1.style.backgroundImage = `url('${nextImg}')`;
        bg1.classList.add('active');
        bg2.classList.remove('active');
    }
    toggle = !toggle;
}

// --- Chuy·ªÉn sang 3D ---
function transitionTo3D() {
    storyScreen.style.opacity = '0';
    setTimeout(() => {
        storyScreen.style.display = 'none';
        initThreeJS();
    }, 2000);
}

// --- Three.js gallery ---
function initThreeJS() {
    const container = document.getElementById('canvas-container');
    const scene = new THREE.Scene();
    scene.fog = new THREE.FogExp2(0x000000, 0.002);

    const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(0,0,1200);

    const renderer = new THREE.WebGLRenderer({ alpha:true, antialias:true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);

    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
    controls.autoRotate = true;
    controls.autoRotateSpeed = 1.0;

    // Load ·∫£nh v√≤ng tr√≤n
    const loader = new THREE.TextureLoader();
    const galleryImages = [...teacherImages,...teacherImages,...teacherImages];
    galleryImages.forEach((url,i)=>{
        loader.load(url, (texture)=>{
            const img = texture.image;
            const w = img.width, h = img.height;
            const scale = 0.12;
            const geometry = new THREE.PlaneGeometry(w*scale,h*scale);
            const material = new THREE.MeshBasicMaterial({ map:texture, side:THREE.DoubleSide });
            const mesh = new THREE.Mesh(geometry,material);
            const radius = 900;
            const angle = (i/galleryImages.length)*Math.PI*2;
            mesh.position.x = Math.cos(angle)*radius;
            mesh.position.y = 0;
            mesh.position.z = Math.sin(angle)*radius;
            mesh.lookAt(0,0,0);
            scene.add(mesh);
        });
    });

    // Hi·ªáu ·ª©ng sao
    const starGeo = new THREE.BufferGeometry();
    const starCount = 10000;
    const starPos = new Float32Array(starCount*3);
    for(let i=0;i<starCount*3;i++){ starPos[i]=(Math.random()-0.5)*5000; }
    starGeo.setAttribute("position", new THREE.BufferAttribute(starPos,3));
    const stars = new THREE.Points(starGeo,new THREE.PointsMaterial({ color:0xffffff,size:2 }));
    scene.add(stars);

    function animate() {
        requestAnimationFrame(animate);
        controls.update();
        renderer.render(scene,camera);
    }
    animate();

    window.addEventListener("resize",()=>{
        camera.aspect = window.innerWidth/window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth,window.innerHeight);
    });
}


</script>
</body>
</html>
